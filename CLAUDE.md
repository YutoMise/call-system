# Claude利用時のルール

## プロジェクト構成のルール
-  **プロジェクトの場所**: F:\call-system配下にあるのでこのフォルダだけを確認してください

## 応答に関するルール
-   **言語**: 常に日本語で回答してください。専門用語を使用する場合は、必要に応じて簡単な解説を加えてください。

## 問題解決に関するルール
-   **根本原因の解決**: 問題が発生した場合、その場しのぎの対症療法的な解決策ではなく、問題の根本原因を特定し、それを取り除くようなコードや手順を提案してください。

---
## ファイル作成時の注意点（ファイル作成時必ず確認）
- ファイル作成時に、そのファイルがGithubに挙げられるべきではないと判断した場合には、必ず`.gitignore`に指定してください。

---
## Webアプリケーション開発に関するルール

### **コーディング全般**

-   **単一責任の原則 (Single Responsibility Principle)**: 一つのクラスや関数は、一つの機能や関心事にのみ責任を持つように設計してください。
-   **Don't Repeat Yourself (DRY)**: 同じコードを繰り返し書かず、共通化できる処理は関数やクラスにまとめて再利用してください。
-   **KISSの原則 (Keep It Simple, Stupid)**: 複雑すぎるコードは避け、できるだけシンプルで理解しやすいコードを記述してください。
-   **意味のある命名**: 変数名、関数名、クラス名は、その役割が明確にわかるような、意味のある名前を付けてください。（例: `x` や `data` のような曖昧な名前は避ける）
-   **マジックナンバーの禁止**: コード内に直接、意味の不明な数値（マジックナンバー）を記述せず、定数として名前を付けて定義してください。

### **バージョン管理**

-   **コミットメッセージ**: コミットメッセージは、変更内容が明確にわかるように記述してください。一般的に、「何を」「なぜ」変更したのかを簡潔に記載します。
-   **ブランチ戦略**: 機能追加やバグ修正など、作業単位でブランチを作成してください。`main` (または `master`) ブランチへの直接のコミットは避けることを推奨します。
-   **`.gitignore` の活用**: `node_modules` や `.env` ファイル、ログファイルなど、リポジトリに含めるべきでないファイルは `.gitignore` に記述して、バージョン管理の対象外としてください。

### **セキュリティ**

-   **入力値の検証 (Validation)**: ユーザーからの入力値は、受け取る際に必ずバリデーション（形式、文字数、型などの検証）を行い、不正なデータがシステムに登録・利用されないようにしてください。
-   **SQLインジェクション対策**: SQL文を組み立てる際は、プレースホルダ（Prepared Statement）を使用し、SQLインジェクション攻撃を防いでください。
-   **クロスサイトスクリプティング (XSS) 対策**: ユーザーが入力した内容をWebページに表示する際は、必ずエスケープ処理を行い、悪意のあるスクリプトの実行を防いでください。
-   **機密情報の保護**: パスワードなどの機密情報は、必ずハッシュ化してデータベースに保存してください。平文での保存は絶対に避けてください。

### **環境設定**

-   **ポート設定**:
    -   Webアプリケーションのソースコード内でポート番号を直接指定（ハードコーディング）しないでください。
    -   ポート番号は、環境変数を通じて設定できるようにしてください。

-   **環境変数管理**:
    -   ポート番号、データベースの接続情報、APIキーなど、環境によって変わる可能性のある設定値は、すべて `.env` ファイルに記述してください。
    -   アプリケーションは `.env` ファイルから設定を読み込むように実装してください。
    -   目標は、`.env` ファイルを書き換えるだけで、異なる環境（開発、ステージング、本番など）へ簡単に移行できるようにすることです。

#### **.env ファイルの記述例**

```dotenv
# Webサーバー設定
PORT=8080

# データベース接続情報
DB_HOST=localhost
DB_PORT=5432
DB_USER=user
DB_PASSWORD=password
DB_NAME=mydatabase

# 外部APIキー
API_KEY=xxxxxxxxxxxxxxxxxxxx
```

## プロジェクト固有のコマンド

### 型チェック・リンティング
- 型チェック: `npm run typecheck`（存在する場合）
- リンティング: `npm run lint`（存在する場合）

### テスト実行
- テスト実行コマンドは `package.json` を確認して適切なコマンドを使用してください